<script>
  export let teas;

  $: allBases = [...new Set(teas.map((tea) => tea.base))].sort();

  let filters = {
    tags: [],
    base: [],
  };
  let randomTea;

  function applyFilters(filters, teas) {
    const predicates = [
      ...filters.tags.map(
        (tag) => (tea) => tea.tags.some((tagg) => tagg === tag),
      ),
      ...(filters.base.length > 0
        ? [(tea) => filters.base.some((base) => tea.base === base)]
        : []),
      ...["muchCaffeine", "type"]
        .filter((name) => filters[name] != null)
        .map((name) => (tea) => tea[name] === filters[name]),
    ];

    return teas.filter((tea) => predicates.every((p) => p(tea)));
  }

  function filterRandomTea(filteredTeas) {
    if (!filteredTeas.find((t) => t.index === randomTea?.index)) {
      randomTea = undefined;
    }
  }

  $: filteredTeas = applyFilters(filters, teas);
  $: filterRandomTea(filteredTeas);
  $: bases = allBases.filter((base) =>
    filteredTeas.some((tea) => tea.base === base),
  );
</script>

<h1>Tea menu!</h1>
<div>
  {#each allBases as base}
    {#if filters.base.includes(base)}
      <button
        on:click={() => {
          filters.base = filters.base.filter((b) => b !== base);
        }}
      >
        Not {base}
      </button>{" "}
    {:else}
      <button on:click={() => (filters.base = [...filters.base, base])}>
        {base}
      </button>{" "}
    {/if}
  {/each}
</div>
<div>
  {#if filters.muchCaffeine == null}
    <button on:click={() => (filters.muchCaffeine = true)}>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 20 20"
        fill="currentColor"
        class="h-6 w-6"
      >
        <path
          d="M11.983 1.907a.75.75 0 00-1.292-.657l-8.5 9.5A.75.75 0 002.75 12h6.572l-1.305 6.093a.75.75 0 001.292.657l8.5-9.5A.75.75 0 0017.25 8h-6.572l1.305-6.093z"
        />
      </svg>
      Lots of caffeine
    </button>
    <button on:click={() => (filters.muchCaffeine = false)}>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 20 20"
        fill="currentColor"
        class="h-6 w-6"
      >
        <path
          fill-rule="evenodd"
          d="M2.22 2.22a.75.75 0 011.06 0l14.5 14.5a.75.75 0 11-1.06 1.06L2.22 3.28a.75.75 0 010-1.06z"
          clip-rule="evenodd"
        />
        <path
          d="M4.73 7.912L2.191 10.75A.75.75 0 002.75 12h6.068L4.73 7.912zM9.233 12.415l-1.216 5.678a.75.75 0 001.292.657l2.956-3.303-3.032-3.032zM15.27 12.088l2.539-2.838A.75.75 0 0017.25 8h-6.068l4.088 4.088zM10.767 7.585l1.216-5.678a.75.75 0 00-1.292-.657L7.735 4.553l3.032 3.032z"
        />
      </svg>
      Not much caffeine
    </button>
  {:else}
    <button on:click={() => (filters.muchCaffeine = null)}>
      Not fussed about caffeine
    </button>
  {/if}
</div>
<div>
  {#if filters.type == null}
    <button on:click={() => (filters.type = "bag")}
      ><svg
        fill="currentColor"
        class="h-6 w-6"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        viewBox="0 0 56 56"
        xml:space="preserve"
      >
        <g>
          <path
            d="M55.224,25.076l-4.902-13.222C49.688,10.147,48.049,9,46.241,9H40.5c0-4.963-4.037-9-9-9s-9,4.037-9,9v5   c0,3.859-3.141,7-7,7c-1.933,0-3.686-0.788-4.954-2.06c2.225-0.294,3.954-2.183,3.954-4.487V6.547C14.5,4.04,12.46,2,9.953,2H5.047   C2.54,2,0.5,4.04,0.5,6.547v7.906C0.5,16.96,2.54,19,5.047,19h2.975c1.616,2.41,4.365,4,7.478,4c4.963,0,9-4.037,9-9V9   c0-3.859,3.141-7,7-7s7,3.141,7,7h-6.741c-1.808,0-3.447,1.147-4.08,2.854l-4.902,13.221c-0.184,0.494-0.276,1.012-0.276,1.54   v24.99c0,2.423,1.954,4.395,4.356,4.395h24.287c2.402,0,4.356-1.972,4.356-4.395v-24.99C55.5,26.087,55.407,25.569,55.224,25.076z    M5.047,17C3.643,17,2.5,15.857,2.5,14.453V6.547C2.5,5.143,3.643,4,5.047,4h4.906C11.357,4,12.5,5.143,12.5,6.547v7.906   C12.5,15.857,11.357,17,9.953,17H9.185C8.75,16.089,8.5,15.074,8.5,14h-2c0,1.053,0.191,2.06,0.525,3H5.047z M40.5,16.278   c0.595,0.347,1,0.985,1,1.722c0,1.103-0.897,2-2,2s-2-0.897-2-2c0-0.737,0.405-1.375,1-1.722V18h2V16.278z M51.144,54H26.856   c-1.3,0-2.356-1.074-2.356-2.395v-5.191l1.293,1.293l1.414-1.414L24.5,43.586v-7.172l1.293,1.293l1.414-1.414L24.5,33.586v-6.971   c0-0.289,0.051-0.573,0.151-0.844l4.902-13.222c0.344-0.927,1.23-1.55,2.205-1.55H38.5v3.142c-1.72,0.447-3,1.999-3,3.858   c0,2.206,1.794,4,4,4s4-1.794,4-4c0-1.859-1.28-3.411-3-3.858V11h5.741c0.975,0,1.861,0.623,2.205,1.55l4.902,13.223   c0.101,0.27,0.151,0.554,0.151,0.843v7.971l-1-1l-2.707,2.707l1.414,1.414l1.293-1.293l1,1v7.172l-1-1l-2.707,2.707l1.414,1.414   l1.293-1.293l1,1v4.191C53.5,52.926,52.443,54,51.144,54z"
          />
          <polygon
            points="25.793,51.293 27.207,52.707 28.5,51.414 29.793,52.707 31.207,51.293 28.5,48.586  "
          />
          <polygon
            points="32.793,51.293 34.207,52.707 35.5,51.414 36.793,52.707 38.207,51.293 35.5,48.586  "
          />
          <polygon
            points="39.793,51.293 41.207,52.707 42.5,51.414 43.793,52.707 45.207,51.293 42.5,48.586  "
          />
          <polygon
            points="46.793,51.293 48.207,52.707 49.5,51.414 50.793,52.707 52.207,51.293 49.5,48.586  "
          />
          <polygon
            points="28.5,41.414 29.793,42.707 31.207,41.293 28.5,38.586 25.793,41.293 27.207,42.707  "
          />
          <polygon
            points="34.207,42.707 35.5,41.414 36.793,42.707 38.207,41.293 35.5,38.586 32.793,41.293  "
          />
          <polygon
            points="41.207,42.707 42.5,41.414 43.793,42.707 45.207,41.293 42.5,38.586 39.793,41.293  "
          />
          <polygon
            points="48.207,42.707 49.5,41.414 50.793,42.707 52.207,41.293 49.5,38.586 46.793,41.293  "
          />
          <polygon
            points="34.207,46.293 31.5,43.586 28.793,46.293 30.207,47.707 31.5,46.414 32.793,47.707  "
          />
          <polygon
            points="41.207,46.293 38.5,43.586 35.793,46.293 37.207,47.707 38.5,46.414 39.793,47.707  "
          />
          <polygon
            points="48.207,46.293 45.5,43.586 42.793,46.293 44.207,47.707 45.5,46.414 46.793,47.707  "
          />
          <polygon
            points="31.5,36.414 32.793,37.707 34.207,36.293 31.5,33.586 28.793,36.293 30.207,37.707  "
          />
          <polygon
            points="38.5,36.414 39.793,37.707 41.207,36.293 38.5,33.586 35.793,36.293 37.207,37.707  "
          />
          <polygon
            points="45.5,36.414 46.793,37.707 48.207,36.293 45.5,33.586 42.793,36.293 44.207,37.707  "
          />
        </g>
      </svg>
      I'm feeling lazy
    </button>
    <button on:click={() => (filters.type = "loose")}>
      <svg
        fill="currentColor"
        class="h-6 w-6"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        viewBox="0 0 55.972 55.972"
        xml:space="preserve"
      >
        <g>
          <path
            d="M55.972,24.343c0-5.514-4.486-10-10-10c-2.008,0-3.934,0.603-5.597,1.732c-3.336-3.314-7.46-5.632-11.912-6.427   c0.621-0.772,1.009-1.739,1.009-2.805c0-2.481-2.019-4.5-4.5-4.5s-4.5,2.019-4.5,4.5c0,1.08,0.398,2.058,1.034,2.835   c-4.43,0.823-8.619,3.165-12.103,6.816l-2.835-2.529c-1.302-1.161-3.228-1.418-4.683-0.623c-1.056,0.574-1.735,1.541-1.863,2.652   c-0.125,1.084,0.287,2.137,1.13,2.889c2.247,2.006,3.038,4.96,2.063,7.71c-0.227,0.641-0.419,1.286-0.598,1.932l-0.005,0.001   l-0.019,0.077c-0.288,1.059-0.497,2.123-0.652,3.188c-0.049,0.329-0.094,0.656-0.13,0.983c-0.029,0.272-0.058,0.544-0.078,0.817   c-0.05,0.637-0.084,1.271-0.084,1.896c0,4.905,1.458,9.619,4.217,13.632c0.239,0.348,0.503,0.679,0.788,0.993   c1.996,2.195,5.055,3.519,8.27,3.519h20.273c3.214,0,6.273-1.323,8.269-3.519c0.285-0.314,0.549-0.645,0.788-0.993   c2.759-4.012,4.218-8.726,4.218-13.632c0-0.488-0.017-0.974-0.043-1.457C52.851,32.922,55.972,28.984,55.972,24.343z    M46.182,31.802c-1.132-0.117-2.183-0.602-2.988-1.407c-2.627-2.627-6.843-2.725-9.588-0.293l-0.341,0.293   c-0.091,0.091-0.197,0.157-0.293,0.239V16.343h-7v-4.971C35.718,11.913,44.505,21.034,46.182,31.802z M18.972,30.917   c1.879-0.961,4.237-0.679,5.808,0.892c1.323,1.323,3.081,2.052,4.95,2.052c0.421,0,0.836-0.038,1.242-0.111v9.593h-12V30.917z    M26.194,30.395c-1.949-1.949-4.773-2.503-7.222-1.667V18.343h12v13.338C29.316,32.104,27.488,31.688,26.194,30.395z M24.972,4.343   c1.379,0,2.5,1.121,2.5,2.5s-1.121,2.5-2.5,2.5s-2.5-1.121-2.5-2.5S23.593,4.343,24.972,4.343z M2.484,17.39   c-0.352-0.313-0.524-0.738-0.476-1.167c0.054-0.463,0.35-0.862,0.833-1.126c0.261-0.142,0.565-0.21,0.881-0.21   c0.535,0,1.099,0.198,1.515,0.569l3.488,3.113c0.45,0.402,1.152,0.365,1.563-0.088c3.842-4.294,8.664-6.786,13.684-7.102v4.964h-7   v13.465c-0.123,0.095-0.248,0.189-0.366,0.294l-0.341,0.293c-0.945,0.945-2.201,1.466-3.535,1.466   c-1.335,0-2.591-0.521-3.536-1.466c-1.204-1.204-2.769-1.901-4.441-2.011c0.114-0.375,0.215-0.751,0.347-1.124   C6.352,23.729,5.349,19.948,2.484,17.39z M42.606,47.985c-0.193,0.281-0.406,0.549-0.638,0.802   c-1.619,1.773-4.123,2.842-6.771,2.842H14.923c-2.269,0-4.433-0.785-6.024-2.126c-0.242-0.204-0.466-0.424-0.68-0.652   c-0.021-0.022-0.046-0.041-0.066-0.063c-0.231-0.253-0.445-0.521-0.638-0.802c-2.528-3.678-3.865-8-3.865-12.499   c0-0.575,0.034-1.152,0.077-1.729c0.016-0.207,0.031-0.413,0.053-0.621c0.044-0.44,0.106-0.879,0.174-1.318   c0.063-0.393,0.138-0.788,0.221-1.184c0.019-0.09,0.04-0.18,0.06-0.27c0.013-0.001,0.027-0.001,0.041-0.001   c1.319,0,2.568,0.509,3.505,1.446c1.323,1.323,3.081,2.052,4.95,2.052c1.553,0,3.028-0.508,4.242-1.438v12.92h16V33.06   c0.497-0.261,0.968-0.578,1.396-0.958l0.34-0.293c1.949-1.949,5.122-1.949,7.071,0c1.236,1.236,2.883,1.946,4.627,2.019   c0.001,0.016,0.003,0.033,0.004,0.049c0.04,0.55,0.062,1.089,0.062,1.609C46.472,39.986,45.135,44.307,42.606,47.985z    M48.254,32.003c-0.662-5.354-2.827-10.603-6.065-14.702c1.161-0.63,2.451-0.958,3.783-0.958c4.411,0,8,3.589,8,8   C53.972,27.944,51.624,31.015,48.254,32.003z"
          />
          <circle cx="24.972" cy="41.343" r="1" />
          <circle cx="28.972" cy="35.343" r="1" />
          <circle cx="20.972" cy="35.343" r="1" />
          <circle cx="24.972" cy="35.343" r="1" />
          <circle cx="26.972" cy="38.343" r="1" />
          <circle cx="22.972" cy="38.343" r="1" />
        </g>
      </svg>
      I'm feeling fancy
    </button>
  {:else}
    <button on:click={() => (filters.type = null)}> I just want tea! </button>
  {/if}
</div>
<div class="flex-col">
  <button
    on:click={() =>
      (randomTea =
        filteredTeas[Math.floor(Math.random() * filteredTeas.length)])}
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="h-6 w-6"
      fill="currentColor"
      viewBox="0 0 640 512"
      ><path
        d="M592 192H473.26c12.69 29.59 7.12 65.2-17 89.32L320 417.58V464c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48V240c0-26.51-21.49-48-48-48zM480 376c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24zm-46.37-186.7L258.7 14.37c-19.16-19.16-50.23-19.16-69.39 0L14.37 189.3c-19.16 19.16-19.16 50.23 0 69.39L189.3 433.63c19.16 19.16 50.23 19.16 69.39 0L433.63 258.7c19.16-19.17 19.16-50.24 0-69.4zM96 248c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24zm128 128c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24zm0-128c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24zm0-128c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24zm128 128c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"
      /></svg
    >I'm feeling lucktea{randomTea?.base === "not" ? "*" : ""}
  </button>
  {#if randomTea}
    <p>
      Maybe you want <a
        href="#tea{randomTea.index}"
        class="font-bold text-emerald-600 dark:text-emerald-500"
        >{randomTea.name}</a
      >?
    </p>
  {/if}
</div>
{#each bases as base}
  <h2>{base} tea</h2>
  <ul>
    {#each filteredTeas
      .filter((tea) => tea.base === base)
      .sort((a, b) => a.name.localeCompare(b.name)) as tea}
      <section id="tea{tea.index}">
        <li class="my-2">
          <span class="text-lg font-semibold" class:line-through={!tea.inStock}
            >{tea.name}</span
          >
          {!tea.inStock ? "(ran out)" : ""}
          {#if tea.type === "loose"}
            <svg
              fill="currentColor"
              class="-mt-1 inline-block h-5 w-5"
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
              viewBox="0 0 55.972 55.972"
              xml:space="preserve"
            >
              <g>
                <path
                  d="M55.972,24.343c0-5.514-4.486-10-10-10c-2.008,0-3.934,0.603-5.597,1.732c-3.336-3.314-7.46-5.632-11.912-6.427   c0.621-0.772,1.009-1.739,1.009-2.805c0-2.481-2.019-4.5-4.5-4.5s-4.5,2.019-4.5,4.5c0,1.08,0.398,2.058,1.034,2.835   c-4.43,0.823-8.619,3.165-12.103,6.816l-2.835-2.529c-1.302-1.161-3.228-1.418-4.683-0.623c-1.056,0.574-1.735,1.541-1.863,2.652   c-0.125,1.084,0.287,2.137,1.13,2.889c2.247,2.006,3.038,4.96,2.063,7.71c-0.227,0.641-0.419,1.286-0.598,1.932l-0.005,0.001   l-0.019,0.077c-0.288,1.059-0.497,2.123-0.652,3.188c-0.049,0.329-0.094,0.656-0.13,0.983c-0.029,0.272-0.058,0.544-0.078,0.817   c-0.05,0.637-0.084,1.271-0.084,1.896c0,4.905,1.458,9.619,4.217,13.632c0.239,0.348,0.503,0.679,0.788,0.993   c1.996,2.195,5.055,3.519,8.27,3.519h20.273c3.214,0,6.273-1.323,8.269-3.519c0.285-0.314,0.549-0.645,0.788-0.993   c2.759-4.012,4.218-8.726,4.218-13.632c0-0.488-0.017-0.974-0.043-1.457C52.851,32.922,55.972,28.984,55.972,24.343z    M46.182,31.802c-1.132-0.117-2.183-0.602-2.988-1.407c-2.627-2.627-6.843-2.725-9.588-0.293l-0.341,0.293   c-0.091,0.091-0.197,0.157-0.293,0.239V16.343h-7v-4.971C35.718,11.913,44.505,21.034,46.182,31.802z M18.972,30.917   c1.879-0.961,4.237-0.679,5.808,0.892c1.323,1.323,3.081,2.052,4.95,2.052c0.421,0,0.836-0.038,1.242-0.111v9.593h-12V30.917z    M26.194,30.395c-1.949-1.949-4.773-2.503-7.222-1.667V18.343h12v13.338C29.316,32.104,27.488,31.688,26.194,30.395z M24.972,4.343   c1.379,0,2.5,1.121,2.5,2.5s-1.121,2.5-2.5,2.5s-2.5-1.121-2.5-2.5S23.593,4.343,24.972,4.343z M2.484,17.39   c-0.352-0.313-0.524-0.738-0.476-1.167c0.054-0.463,0.35-0.862,0.833-1.126c0.261-0.142,0.565-0.21,0.881-0.21   c0.535,0,1.099,0.198,1.515,0.569l3.488,3.113c0.45,0.402,1.152,0.365,1.563-0.088c3.842-4.294,8.664-6.786,13.684-7.102v4.964h-7   v13.465c-0.123,0.095-0.248,0.189-0.366,0.294l-0.341,0.293c-0.945,0.945-2.201,1.466-3.535,1.466   c-1.335,0-2.591-0.521-3.536-1.466c-1.204-1.204-2.769-1.901-4.441-2.011c0.114-0.375,0.215-0.751,0.347-1.124   C6.352,23.729,5.349,19.948,2.484,17.39z M42.606,47.985c-0.193,0.281-0.406,0.549-0.638,0.802   c-1.619,1.773-4.123,2.842-6.771,2.842H14.923c-2.269,0-4.433-0.785-6.024-2.126c-0.242-0.204-0.466-0.424-0.68-0.652   c-0.021-0.022-0.046-0.041-0.066-0.063c-0.231-0.253-0.445-0.521-0.638-0.802c-2.528-3.678-3.865-8-3.865-12.499   c0-0.575,0.034-1.152,0.077-1.729c0.016-0.207,0.031-0.413,0.053-0.621c0.044-0.44,0.106-0.879,0.174-1.318   c0.063-0.393,0.138-0.788,0.221-1.184c0.019-0.09,0.04-0.18,0.06-0.27c0.013-0.001,0.027-0.001,0.041-0.001   c1.319,0,2.568,0.509,3.505,1.446c1.323,1.323,3.081,2.052,4.95,2.052c1.553,0,3.028-0.508,4.242-1.438v12.92h16V33.06   c0.497-0.261,0.968-0.578,1.396-0.958l0.34-0.293c1.949-1.949,5.122-1.949,7.071,0c1.236,1.236,2.883,1.946,4.627,2.019   c0.001,0.016,0.003,0.033,0.004,0.049c0.04,0.55,0.062,1.089,0.062,1.609C46.472,39.986,45.135,44.307,42.606,47.985z    M48.254,32.003c-0.662-5.354-2.827-10.603-6.065-14.702c1.161-0.63,2.451-0.958,3.783-0.958c4.411,0,8,3.589,8,8   C53.972,27.944,51.624,31.015,48.254,32.003z"
                />
                <circle cx="24.972" cy="41.343" r="1" />
                <circle cx="28.972" cy="35.343" r="1" />
                <circle cx="20.972" cy="35.343" r="1" />
                <circle cx="24.972" cy="35.343" r="1" />
                <circle cx="26.972" cy="38.343" r="1" />
                <circle cx="22.972" cy="38.343" r="1" />
              </g>
            </svg>
          {:else}
            <svg
              fill="currentColor"
              class="-mt-1 inline-block h-5 w-5"
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
              viewBox="0 0 56 56"
              xml:space="preserve"
            >
              <g>
                <path
                  d="M55.224,25.076l-4.902-13.222C49.688,10.147,48.049,9,46.241,9H40.5c0-4.963-4.037-9-9-9s-9,4.037-9,9v5   c0,3.859-3.141,7-7,7c-1.933,0-3.686-0.788-4.954-2.06c2.225-0.294,3.954-2.183,3.954-4.487V6.547C14.5,4.04,12.46,2,9.953,2H5.047   C2.54,2,0.5,4.04,0.5,6.547v7.906C0.5,16.96,2.54,19,5.047,19h2.975c1.616,2.41,4.365,4,7.478,4c4.963,0,9-4.037,9-9V9   c0-3.859,3.141-7,7-7s7,3.141,7,7h-6.741c-1.808,0-3.447,1.147-4.08,2.854l-4.902,13.221c-0.184,0.494-0.276,1.012-0.276,1.54   v24.99c0,2.423,1.954,4.395,4.356,4.395h24.287c2.402,0,4.356-1.972,4.356-4.395v-24.99C55.5,26.087,55.407,25.569,55.224,25.076z    M5.047,17C3.643,17,2.5,15.857,2.5,14.453V6.547C2.5,5.143,3.643,4,5.047,4h4.906C11.357,4,12.5,5.143,12.5,6.547v7.906   C12.5,15.857,11.357,17,9.953,17H9.185C8.75,16.089,8.5,15.074,8.5,14h-2c0,1.053,0.191,2.06,0.525,3H5.047z M40.5,16.278   c0.595,0.347,1,0.985,1,1.722c0,1.103-0.897,2-2,2s-2-0.897-2-2c0-0.737,0.405-1.375,1-1.722V18h2V16.278z M51.144,54H26.856   c-1.3,0-2.356-1.074-2.356-2.395v-5.191l1.293,1.293l1.414-1.414L24.5,43.586v-7.172l1.293,1.293l1.414-1.414L24.5,33.586v-6.971   c0-0.289,0.051-0.573,0.151-0.844l4.902-13.222c0.344-0.927,1.23-1.55,2.205-1.55H38.5v3.142c-1.72,0.447-3,1.999-3,3.858   c0,2.206,1.794,4,4,4s4-1.794,4-4c0-1.859-1.28-3.411-3-3.858V11h5.741c0.975,0,1.861,0.623,2.205,1.55l4.902,13.223   c0.101,0.27,0.151,0.554,0.151,0.843v7.971l-1-1l-2.707,2.707l1.414,1.414l1.293-1.293l1,1v7.172l-1-1l-2.707,2.707l1.414,1.414   l1.293-1.293l1,1v4.191C53.5,52.926,52.443,54,51.144,54z"
                />
                <polygon
                  points="25.793,51.293 27.207,52.707 28.5,51.414 29.793,52.707 31.207,51.293 28.5,48.586  "
                />
                <polygon
                  points="32.793,51.293 34.207,52.707 35.5,51.414 36.793,52.707 38.207,51.293 35.5,48.586  "
                />
                <polygon
                  points="39.793,51.293 41.207,52.707 42.5,51.414 43.793,52.707 45.207,51.293 42.5,48.586  "
                />
                <polygon
                  points="46.793,51.293 48.207,52.707 49.5,51.414 50.793,52.707 52.207,51.293 49.5,48.586  "
                />
                <polygon
                  points="28.5,41.414 29.793,42.707 31.207,41.293 28.5,38.586 25.793,41.293 27.207,42.707  "
                />
                <polygon
                  points="34.207,42.707 35.5,41.414 36.793,42.707 38.207,41.293 35.5,38.586 32.793,41.293  "
                />
                <polygon
                  points="41.207,42.707 42.5,41.414 43.793,42.707 45.207,41.293 42.5,38.586 39.793,41.293  "
                />
                <polygon
                  points="48.207,42.707 49.5,41.414 50.793,42.707 52.207,41.293 49.5,38.586 46.793,41.293  "
                />
                <polygon
                  points="34.207,46.293 31.5,43.586 28.793,46.293 30.207,47.707 31.5,46.414 32.793,47.707  "
                />
                <polygon
                  points="41.207,46.293 38.5,43.586 35.793,46.293 37.207,47.707 38.5,46.414 39.793,47.707  "
                />
                <polygon
                  points="48.207,46.293 45.5,43.586 42.793,46.293 44.207,47.707 45.5,46.414 46.793,47.707  "
                />
                <polygon
                  points="31.5,36.414 32.793,37.707 34.207,36.293 31.5,33.586 28.793,36.293 30.207,37.707  "
                />
                <polygon
                  points="38.5,36.414 39.793,37.707 41.207,36.293 38.5,33.586 35.793,36.293 37.207,37.707  "
                />
                <polygon
                  points="45.5,36.414 46.793,37.707 48.207,36.293 45.5,33.586 42.793,36.293 44.207,37.707  "
                />
              </g>
            </svg>
          {/if}
          {#if tea.whereFrom}<span class="text-gray-500 dark:text-gray-300"
              >({tea.whereFrom})</span
            >{/if}
          <span
            class="whitespace-nowrap text-sm text-gray-700 dark:text-gray-200"
            >{tea.brewTemp}℃ for {@html tea.brewTime.replace(
              "--",
              "&ndash;",
            )}</span
          >
          {#if tea.ingredients}<br /><span
              class="text-sm text-gray-500 dark:text-gray-300"
              >{tea.ingredients.join(", ")}</span
            >{/if}
          <a class="hidden" href="/#">Back to top </a>
        </li>
      </section>
    {:else}
      Oh no! No tea for you I guess!
    {/each}
  </ul>
{/each}

<style lang="postcss">
  h1 {
    @apply pb-4 text-4xl font-bold text-emerald-700 dark:text-emerald-500;
  }
  h2 {
    @apply py-4 text-3xl font-bold text-emerald-700 dark:text-emerald-500;
  }

  button {
    @apply inline-flex items-center gap-x-1.5 rounded-md bg-emerald-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-emerald-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-600;
    @apply h-10;
  }
  div {
    @apply my-3 flex flex-wrap items-center justify-center gap-3;
    --width: min(150%, 90vw);
    width: var(--width);
    margin-inline: calc((100% - var(--width)) / 2);
  }

  section:target {
    @apply -mx-4 -my-1 bg-emerald-700/20 px-4 py-1 dark:bg-emerald-500/20;
  }

  section:target .hidden {
    @apply block font-bold text-emerald-700 dark:text-emerald-500;
  }
  :global(body) {
    @apply bg-white dark:bg-gray-900;
  }

  :global(html) {
    scroll-behavior: smooth;
  }
</style>
